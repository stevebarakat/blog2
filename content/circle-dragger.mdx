---
title: "Making a Circle Dragger with React and XState"
abstract: An enhanced version of the 7GUIs Circle Drawer.
publishedOn: "2023-09-06T12:00:00-0400"
---

<P>
In this tutorial, we'll build a circle dragger using React and XState. This is an enhanced version of the 7GUIs Circle Drawer, which is a simple application that allows you to draw circles on the screen. In our version, you'll be able to drag the circles around the screen.

Statley Studio is a visual editor for creating state machines. It's a great tool for designing and testing state machines, and it can help you understand how they work. In this tutorial, we'll use Stately Studio to create a state machine for our circle dragger application.

We'll start by creating a new machine from a blank canvas.

</P>
<Stately
  url="https://stately.ai/registry/editor/embed/6ad630e7-c4f1-40e5-8068-4c0a0398a8e9?mode=design&machineId=a5701504-59a3-4092-9bd4-3972be705357"
  height="350px"
/>

<P>
  We only want to focus on the initial state right now. So let's delete the
  second state, rename the first state to "ready", and give it a descritpion.
</P>

<Stately
  url="https://stately.ai/registry/editor/embed/6ad630e7-c4f1-40e5-8068-4c0a0398a8e9?mode=design&machineId=6044140f-70ea-402e-bb4e-d6bae8feaa9b"
  height="500px"
/>

<P>
  Let's add a transition with an event for creating a new circle. We'll call
  this event "STAGE_TOUCHED". It triggers an action called `handleAddCircle`
  that creates a new circle at the position where the user touched the stage
  with the pointer.
</P>

<Stately
  url="https://stately.ai/registry/editor/embed/6ad630e7-c4f1-40e5-8068-4c0a0398a8e9?mode=design&machineId=a9c06227-663e-4f0c-8e3a-be6fb9dc7c3a"
  height="500px"
/>

We need to add a guard to this event to check if there is a circle at the position where the user touched the stage. If there is, we'll select that circle. If there isn't, we'll create a new circle. We'll call this guard `isCircleAtPosition?`.

<Stately
  url="https://stately.ai/registry/editor/embed/6ad630e7-c4f1-40e5-8068-4c0a0398a8e9?machineId=5b8943fc-837a-419f-a4b6-09c20e26b8aa"
  height="700px"
/>

Opening the code panel, we can see the generated code for our state machine at this point.

<Sandbox />
